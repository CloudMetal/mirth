<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Channel">
	<parameterMap class="com.webreach.mirth.model.Channel" id="insert-channel-param">
		<parameter property="id" jdbcType="VARCHAR"/>
		<parameter property="name" jdbcType="VARCHAR"/>
		<parameter property="description" jdbcType="CLOB"/>
		<parameter property="enabled" jdbcType="SMALLINT"/>
		<parameter property="version" jdbcType="VARCHAR"/>
		<parameter property="revision" jdbcType="INTEGER"/>
		<parameter property="direction" jdbcType="VARCHAR"/>
		<parameter property="protocol" jdbcType="VARCHAR"/>
		<parameter property="mode" jdbcType="VARCHAR"/>
		<parameter property="sourceConnector" jdbcType="CLOB"/>
		<parameter property="destinationConnectors" jdbcType="CLOB"/>
		<parameter property="properties" jdbcType="CLOB"/>
		<parameter property="preprocessingScript" jdbcType="CLOB"/>
	</parameterMap>

	<parameterMap class="com.webreach.mirth.model.Channel" id="update-channel-param">
		<parameter property="name" jdbcType="VARCHAR"/>
		<parameter property="description" jdbcType="CLOB"/>
		<parameter property="enabled" jdbcType="SMALLINT"/>
		<parameter property="version" jdbcType="VARCHAR"/>
		<parameter property="revision" jdbcType="INTEGER"/>
		<parameter property="direction" jdbcType="VARCHAR"/>
		<parameter property="protocol" jdbcType="VARCHAR"/>
		<parameter property="mode" jdbcType="VARCHAR"/>
		<parameter property="sourceConnector" jdbcType="CLOB"/>
		<parameter property="destinationConnectors" jdbcType="CLOB"/>
		<parameter property="properties" jdbcType="CLOB"/>
		<parameter property="preprocessingScript" jdbcType="CLOB"/>
		<parameter property="id" jdbcType="VARCHAR"/>
	</parameterMap>

	<resultMap class="com.webreach.mirth.model.Channel" id="get-channel-result">
		<result property="id" column="ID" />
		<result property="name" column="NAME" />
		<result property="description" column="DESCRIPTION" />
		<result property="enabled" column="IS_ENABLED" />
		<result property="version" column="VERSION" />
		<result property="revision" column="REVISION" />		
		<result property="direction" column="DIRECTION" />								
		<result property="protocol" column="PROTOCOL" />
		<result property="mode" column="MODE" />
		<result property="sourceConnector" column="SOURCE_CONNECTOR" />
		<result property="destinationConnectors" column="DESTINATION_CONNECTORS" />
		<result property="properties" column="PROPERTIES" />
		<result property="preprocessingScript" column="PREPROCESSING_SCRIPT" />
	</resultMap>
	
	<select id="getChannel" parameterClass="com.webreach.mirth.model.Channel" resultMap="get-channel-result">
		SELECT *
		FROM CHANNEL
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="id">
				ID=#id#
			</isNotNull>
			<isNotNull prepend="AND" property="name">
				NAME=#name#
			</isNotNull>
		</dynamic>
	</select>
	
	<insert id="insertChannel" parameterMap="insert-channel-param">
		INSERT INTO
		CHANNEL (ID, NAME, DESCRIPTION, IS_ENABLED, VERSION, REVISION, DIRECTION, PROTOCOL, MODE, SOURCE_CONNECTOR, DESTINATION_CONNECTORS, PROPERTIES, PREPROCESSING_SCRIPT)
		VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
	</insert>
	
	<update id="updateChannel" parameterMap="update-channel-param">
		UPDATE CHANNEL
		SET NAME = ?,
			DESCRIPTION = ?,
			IS_ENABLED = ?,
			VERSION = ?,
			REVISION = ?,
			DIRECTION = ?,
			PROTOCOL = ?,
			MODE = ?,
			SOURCE_CONNECTOR = ?,
			DESTINATION_CONNECTORS = ?,
			PROPERTIES = ?,
			PREPROCESSING_SCRIPT = ?
		WHERE ID = ?
	</update>
	
	<delete id="deleteChannel" parameterClass="com.webreach.mirth.model.Channel">
		DELETE FROM CHANNEL
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="id">
				ID=#id#
			</isNotNull>
		</dynamic>
	</delete>
</sqlMap>