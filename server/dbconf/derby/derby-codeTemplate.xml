<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN' 'conf/dtd/mybatis-3-mapper.dtd'>

<mapper namespace="CodeTemplate">
	<resultMap type="com.mirth.connect.model.CodeTemplate" id="get-code-template-result">
		<result property="id" column="ID" />
		<result property="name" column="NAME" />
		<result property="scope" column="CODE_SCOPE" />		
		<result property="type" column="CODE_TYPE" />
		<result property="tooltip" column="TOOLTIP" />
		<result property="code" column="CODE" />
	</resultMap>
	
	<select id="getCodeTemplate" parameterType="com.mirth.connect.model.CodeTemplate" resultMap="get-code-template-result">
		SELECT C.ID, C.NAME, C.CODE_SCOPE, C.CODE_TYPE, C.TOOLTIP, C.CODE
		FROM CODE_TEMPLATE C
		<where>
			<if test='id != null'>C.ID = #{id}</if>
		</where>
	</select>

	<insert id="insertCodeTemplate" parameterType="com.mirth.connect.model.CodeTemplate">
		INSERT INTO CODE_TEMPLATE (ID, NAME, CODE_SCOPE, CODE_TYPE, TOOLTIP, CODE)
		VALUES (#{id}, #{name}, #{scope}, #{type}, #{tooltip}, #{code})
	</insert>

	<delete id="deleteCodeTemplate" parameterType="com.mirth.connect.model.CodeTemplate">
		DELETE FROM CODE_TEMPLATE
		<where>
       		<if test='id != null'>ID = #{id}</if>
      	</where>
	</delete>
	
	<select id="vacuumCodeTemplateTable" statementType="CALLABLE">
		{call SYSCS_UTIL.SYSCS_COMPRESS_TABLE('APP', 'CODE_TEMPLATE', 0)}
	</select>
	
</mapper>